{"version":3,"sources":["ng://ng-nice-select/lib/ng-nice-select.directive.ts","ng://ng-nice-select/lib/ng-nice-select.module.ts"],"names":["NgNiceSelectDirective","el","this","prototype","ngAfterViewInit","$","nativeElement","niceSelect","attachAngularChange","attachObserver","_this","one","customEvent","document","createEvent","initEvent","dispatchEvent","observer","MutationObserver","mutations","forEach","onChanges","observe","attributes","childList","characterData","detachObserver","disconnect","ngOnDestroy","Directive","args","selector","ElementRef","NiceSelectModule","NgModule","declarations","imports","exports"],"mappings":"6TAAA,IAAAA,EAAA,WAaE,SAAAA,EACUC,GAAAC,KAAAD,GAAAA,EA8CZ,OA3CED,EAAAG,UAAAC,gBAAA,WACEC,EAAEH,KAAKD,GAAGK,eAAeC,aAEzBL,KAAKM,sBACLN,KAAKO,kBAGPT,EAAAG,UAAAK,oBAAA,WAAA,IAAAE,EAAAR,KACEG,EAAEH,KAAKD,GAAGK,eAAeK,IAAI,SAAU,eAC/BC,EAAcC,SAASC,YAAY,SACzCF,EAAYG,UAAU,UAAU,GAAM,GACtCL,EAAKT,GAAGK,cAAcU,cAAcJ,GACpCF,EAAKF,yBAITR,EAAAG,UAAAM,eAAA,WAAA,IAAAC,EAAAR,KACEA,KAAKe,SAAW,IAAIC,iBAAiB,SAAAC,GACnCA,EAAUC,QAAQ,WAAM,OAAAV,EAAKW,gBAG/BnB,KAAKe,SAASK,QAAQpB,KAAKD,GAAGK,cAAe,CAC3CiB,YAAY,EACZC,WAAW,EACXC,eAAe,KAInBzB,EAAAG,UAAAuB,eAAA,WACExB,KAAKe,SAASU,cAGhB3B,EAAAG,UAAAkB,UAAA,WACEnB,KAAKwB,iBACLrB,EAAEH,KAAKD,GAAGK,eAAeC,WAAW,UACpCL,KAAKO,kBAGPT,EAAAG,UAAAyB,YAAA,WACE1B,KAAKwB,iBACLrB,EAAEH,KAAKD,GAAGK,eAAeC,WAAW,gCAnDvCsB,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,6DAPHC,EAAAA,cA4DThC,EA5DA,GCAAiC,EAAA,WAGA,SAAAA,KAKgC,2BAL/BC,EAAAA,SAAQJ,KAAA,CAAC,CACRK,aAAc,CAACnC,GACfoC,QAAS,GACTC,QAAS,CAACrC,OAEoBiC,EARhC","sourcesContent":["import { ElementRef, OnDestroy, OnChanges, AfterViewInit, HostListener } from '@angular/core';\nimport { Directive } from '@angular/core';\nimport 'jquery-nice-select';\n\ndeclare var $;\n\n@Directive({\n  selector: '[nice-select]',\n})\nexport class NgNiceSelectDirective implements AfterViewInit, OnDestroy {\n\n  observer: MutationObserver;\n\n  constructor(\n    private el: ElementRef\n  ) {}\n\n  ngAfterViewInit(): void {\n    $(this.el.nativeElement).niceSelect();\n\n    this.attachAngularChange();\n    this.attachObserver();\n  }\n\n  attachAngularChange(): void {\n    $(this.el.nativeElement).one('change', () => {\n      const customEvent = document.createEvent('Event');\n      customEvent.initEvent('change', true, true);\n      this.el.nativeElement.dispatchEvent(customEvent);\n      this.attachAngularChange();\n    });\n  }\n\n  attachObserver() {\n    this.observer = new MutationObserver(mutations => {\n      mutations.forEach(() => this.onChanges());\n    });\n\n    this.observer.observe(this.el.nativeElement, {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  }\n\n  detachObserver() {\n    this.observer.disconnect();\n  }\n\n  onChanges() {\n    this.detachObserver();\n    $(this.el.nativeElement).niceSelect('update');\n    this.attachObserver();\n  }\n\n  ngOnDestroy() {\n    this.detachObserver();\n    $(this.el.nativeElement).niceSelect('destroy');\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgNiceSelectDirective } from './ng-nice-select.directive';\n\n@NgModule({\n  declarations: [NgNiceSelectDirective],\n  imports: [],\n  exports: [NgNiceSelectDirective]\n})\nexport class NiceSelectModule { }\n"]}