import { Component, Input, Output, EventEmitter, NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function CountdownComponent_div_1_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 5);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r3.divider, " ");
} }
function CountdownComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div");
    ɵngcc0.ɵɵelementStart(1, "p", 2);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(3, CountdownComponent_div_1_span_3_Template, 2, 1, "span", 3);
    ɵngcc0.ɵɵelementStart(4, "p", 4);
    ɵngcc0.ɵɵtext(5);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const time_r1 = ctx.$implicit;
    const i_r2 = ctx.index;
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMapInterpolate1("measurements ", time_r1, "");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r0.showZero && ctx_r0.displayNumbers[i_r2] < 10 ? "0" + ctx_r0.displayNumbers[i_r2].trim() : ctx_r0.displayNumbers[i_r2], " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.display[i_r2 + 1]);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", time_r1, " ");
} }
const _c0 = ["*"];
class CountdownComponent {
    constructor() {
        this.displayString = '';
        this.showZero = false;
        this.reached = new EventEmitter();
        this.display = [];
        this.displayNumbers = [];
        this.wasReached = false;
        setInterval(() => this._displayString(), 100);
    }
    /**
     * @return {?}
     */
    _displayString() {
        if (this.wasReached)
            return;
        if (typeof this.units === 'string') {
            this.units = this.units.split('|');
        }
        /** @type {?} */
        let givenDate = new Date(this.end);
        /** @type {?} */
        let now = new Date();
        /** @type {?} */
        let dateDifference = givenDate - now;
        if ((dateDifference < 100 && dateDifference > 0) || dateDifference < 0 && !this.wasReached) {
            this.wasReached = true;
            this.reached.next(now);
        }
        /** @type {?} */
        let lastUnit = this.units[this.units.length - 1];
        /** @type {?} */
        let unitConstantForMillisecs = {
            year: (((1000 * 60 * 60 * 24 * 7) * 4) * 12),
            month: ((1000 * 60 * 60 * 24 * 7) * 4),
            weeks: (1000 * 60 * 60 * 24 * 7),
            days: (1000 * 60 * 60 * 24),
            hours: (1000 * 60 * 60),
            minutes: (1000 * 60),
            seconds: 1000
        };
        /** @type {?} */
        let unitsLeft = {};
        /** @type {?} */
        let returnText = '';
        /** @type {?} */
        let returnNumbers = '';
        /** @type {?} */
        let totalMillisecsLeft = dateDifference;
        /** @type {?} */
        let i;
        /** @type {?} */
        let unit;
        for (i in this.units) {
            if (this.units.hasOwnProperty(i)) {
                unit = this.units[i].trim();
                if (unitConstantForMillisecs[unit.toLowerCase()] === false) {
                    //$interval.cancel(countDownInterval);
                    throw new Error('Cannot repeat unit: ' + unit);
                }
                if (unitConstantForMillisecs.hasOwnProperty(unit.toLowerCase()) === false) {
                    throw new Error('Unit: ' + unit + ' is not supported. Please use following units: year, month, weeks, days, hours, minutes, seconds, milliseconds');
                }
                // If it was reached, everything is zero
                unitsLeft[unit] = (this.wasReached) ? 0 : totalMillisecsLeft / unitConstantForMillisecs[unit.toLowerCase()];
                if (lastUnit === unit) {
                    unitsLeft[unit] = Math.ceil(unitsLeft[unit]);
                }
                else {
                    unitsLeft[unit] = Math.floor(unitsLeft[unit]);
                }
                totalMillisecsLeft -= unitsLeft[unit] * unitConstantForMillisecs[unit.toLowerCase()];
                unitConstantForMillisecs[unit.toLowerCase()] = false;
                // If it's less than 0, round to 0
                unitsLeft[unit] = (unitsLeft[unit] > 0) ? unitsLeft[unit] : 0;
                returnNumbers += ' ' + unitsLeft[unit] + ' | ';
                returnText += ' ' + unit;
            }
        }
        if (this.text === null || !this.text) {
            this.text = {
                Year: 'Year',
                Month: 'Month',
                Weeks: 'Weeks',
                Days: 'Days',
                Hours: 'Hours',
                Minutes: 'Minutes',
                Seconds: 'Seconds',
                MilliSeconds: 'Milliseconds'
            };
        }
        this.displayString = returnText
            .replace('Year', this.text.Year + ' | ')
            .replace('Month', this.text.Month + ' | ')
            .replace('Weeks', this.text.Weeks + ' | ')
            .replace('Days', this.text.Days + ' | ')
            .replace('Hours', this.text.Hours + ' | ')
            .replace('Minutes', this.text.Minutes + ' | ')
            .replace('Seconds', this.text.Seconds);
        this.displayNumbers = returnNumbers.split('|');
        this.display = this.displayString.split('|');
    }
}
CountdownComponent.ɵfac = function CountdownComponent_Factory(t) { return new (t || CountdownComponent)(); };
CountdownComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: CountdownComponent, selectors: [["countdown"]], inputs: { displayString: "displayString", showZero: "showZero", units: "units", text: "text", end: "end", divider: "divider" }, outputs: { reached: "reached" }, ngContentSelectors: _c0, decls: 3, vars: 1, consts: [[1, "countdown"], [3, "class", 4, "ngFor", "ngForOf"], [1, "measurements-number"], ["class", "divider", 4, "ngIf"], [1, "measurements-text"], [1, "divider"]], template: function CountdownComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtemplate(1, CountdownComponent_div_1_Template, 6, 6, "div", 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(2);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.display);
    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgIf], styles: [".countdown[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;align-content:center;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}.countdown[_ngcontent-%COMP%]   .measurements[_ngcontent-%COMP%]{flex:.1}.countdown[_ngcontent-%COMP%]   .measurements[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{float:right}"] });
/** @nocollapse */
CountdownComponent.ctorParameters = () => [];
CountdownComponent.propDecorators = {
    units: [{ type: Input }],
    end: [{ type: Input }],
    displayString: [{ type: Input }],
    text: [{ type: Input }],
    divider: [{ type: Input }],
    showZero: [{ type: Input }],
    reached: [{ type: Output }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CountdownComponent, [{
        type: Component,
        args: [{
                selector: 'countdown',
                template: `<div class="countdown">
  <div *ngFor="let time of display; let i = index" class="measurements {{time}}">
    <p class="measurements-number">
      {{ (showZero && displayNumbers[i] < 10) ? '0' + displayNumbers[i].trim() : displayNumbers[i]}}
    </p>
    <span *ngIf="display[i+1]" class="divider"> {{divider}} </span>
    <p class="measurements-text">
      {{time}}
    </p>
  </div>
</div>
<ng-content></ng-content>`,
                styles: [`.countdown{display:flex;align-items:center;justify-content:center;align-content:center;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}.countdown .measurements{flex:.1}.countdown .measurements .divider{float:right}`]
            }]
    }], function () { return []; }, { displayString: [{
            type: Input
        }], showZero: [{
            type: Input
        }], reached: [{
            type: Output
        }], units: [{
            type: Input
        }], text: [{
            type: Input
        }], end: [{
            type: Input
        }], divider: [{
            type: Input
        }] }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class CountdownModule {
}
CountdownModule.ɵfac = function CountdownModule_Factory(t) { return new (t || CountdownModule)(); };
CountdownModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: CountdownModule });
CountdownModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[CommonModule]] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CountdownModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule],
                declarations: [
                    CountdownComponent
                ],
                exports: [
                    CountdownComponent,
                ]
            }]
    }], null, null); })();
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CountdownModule, { declarations: function () { return [CountdownComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [CountdownComponent]; } }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { CountdownComponent, CountdownModule };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmcyLWNvdW50ZG93bi10aW1lci5qcyIsInNvdXJjZXMiOlsibmcyLWNvdW50ZG93bi10aW1lci9saWIvY291bnRkb3duL2NvdW50ZG93bi5jb21wb25lbnQudHMiLCJuZzItY291bnRkb3duLXRpbWVyL2xpYi9jb3VudGRvd24ubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQTRCLElBK0IxQjtBQUNGLDZCQVZtQyxFQUFFO0FBQ3JDLHdCQUUrQixLQUFLO0FBQ3BDLHVCQUEwQyxJQUFJLFlBQVksRUFBRTtBQUM1RCx1QkFBaUIsRUFBRTtBQUNuQiw4QkFBd0IsRUFBRTtBQUMxQiwwQkFBd0IsS0FBSztBQUM3QixRQUVJLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNsRCxLQUFHO0FBQ0g7QUFDTztBQUNGO0FBQVMsSUFEWixjQUFjO0FBQ2hCLFFBQUksSUFBSSxJQUFJLENBQUMsVUFBVTtBQUN2QixZQUFNLE9BQU87QUFDYixRQUNJLElBQUksT0FBTyxJQUFJLENBQUMsS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUN4QyxZQUFNLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsU0FBSztBQUNMO0FBQ3dCLFFBQXBCLElBQUksU0FBUyxHQUFRLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QztBQUEwQixRQUF0QixJQUFJLEdBQUcsR0FBUSxJQUFJLElBQUksRUFBRSxDQUFDO0FBQzlCO0FBQTBCLFFBQXRCLElBQUksY0FBYyxHQUFRLFNBQVMsR0FBRyxHQUFHLENBQUM7QUFDOUMsUUFDSSxJQUFJLENBQUMsY0FBYyxHQUFHLEdBQUcsSUFBSSxjQUFjLEdBQUcsQ0FBQyxLQUFLLGNBQWMsR0FB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QSxBQUFBLEFBQUEsQUFlQSxBQWZBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQU1BLEFBZkEsQUFVQSxBQUFBLEFBQUEsQUFBQSxBQUtBLEFBZkEsQUFXQSxBQUFBLEFBQUEsQUFBQSxBQUlBLEFBZkEsQUFZQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBZkEsQUFhQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBZkEsQUFjQSxBQUFBLEFBQ0EsQUFmQSxBQWVBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBNUhBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBV0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUdBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUMxQkEsQUFJQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2NvdW50ZG93bicsXHJcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwiY291bnRkb3duXCI+XHJcbiAgPGRpdiAqbmdGb3I9XCJsZXQgdGltZSBvZiBkaXNwbGF5OyBsZXQgaSA9IGluZGV4XCIgY2xhc3M9XCJtZWFzdXJlbWVudHMge3t0aW1lfX1cIj5cclxuICAgIDxwIGNsYXNzPVwibWVhc3VyZW1lbnRzLW51bWJlclwiPlxyXG4gICAgICB7eyAoc2hvd1plcm8gJiYgZGlzcGxheU51bWJlcnNbaV0gPCAxMCkgPyAnMCcgKyBkaXNwbGF5TnVtYmVyc1tpXS50cmltKCkgOiBkaXNwbGF5TnVtYmVyc1tpXX19XHJcbiAgICA8L3A+XHJcbiAgICA8c3BhbiAqbmdJZj1cImRpc3BsYXlbaSsxXVwiIGNsYXNzPVwiZGl2aWRlclwiPiB7e2RpdmlkZXJ9fSA8L3NwYW4+XHJcbiAgICA8cCBjbGFzcz1cIm1lYXN1cmVtZW50cy10ZXh0XCI+XHJcbiAgICAgIHt7dGltZX19XHJcbiAgICA8L3A+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG48bmctY29udGVudD48L25nLWNvbnRlbnQ+YCxcclxuICBzdHlsZXM6IFtgLmNvdW50ZG93bntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24tY29udGVudDpjZW50ZXI7Zm9udC1mYW1pbHk6XCJIZWx2ZXRpY2EgTmV1ZVwiLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmfS5jb3VudGRvd24gLm1lYXN1cmVtZW50c3tmbGV4Oi4xfS5jb3VudGRvd24gLm1lYXN1cmVtZW50cyAuZGl2aWRlcntmbG9hdDpyaWdodH1gXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ291bnRkb3duQ29tcG9uZW50IHtcclxuXHJcbiAgQElucHV0KCkgdW5pdHM6IGFueTtcclxuICBASW5wdXQoKSBlbmQ6IGFueTtcclxuICBASW5wdXQoKSBkaXNwbGF5U3RyaW5nOiBTdHJpbmcgPSAnJztcclxuICBASW5wdXQoKSB0ZXh0OiBhbnk7XHJcbiAgQElucHV0KCkgZGl2aWRlcjogYW55O1xyXG4gIEBJbnB1dCgpIHNob3daZXJvOiBCb29sZWFuID0gZmFsc2U7XHJcbiAgQE91dHB1dCgpIHJlYWNoZWQ6IEV2ZW50RW1pdHRlcjxEYXRlPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBkaXNwbGF5OiBhbnkgPSBbXTtcclxuICBkaXNwbGF5TnVtYmVyczogYW55ID0gW107XHJcbiAgd2FzUmVhY2hlZDogQm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHNldEludGVydmFsKCgpID0+IHRoaXMuX2Rpc3BsYXlTdHJpbmcoKSwgMTAwKTtcclxuICB9XHJcblxyXG4gIF9kaXNwbGF5U3RyaW5nKCkge1xyXG4gICAgaWYgKHRoaXMud2FzUmVhY2hlZClcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIGlmICh0eXBlb2YgdGhpcy51bml0cyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy51bml0cyA9IHRoaXMudW5pdHMuc3BsaXQoJ3wnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ2l2ZW5EYXRlOiBhbnkgPSBuZXcgRGF0ZSh0aGlzLmVuZCk7XHJcbiAgICBsZXQgbm93OiBhbnkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IGRhdGVEaWZmZXJlbmNlOiBhbnkgPSBnaXZlbkRhdGUgLSBub3c7XHJcblxyXG4gICAgaWYgKChkYXRlRGlmZmVyZW5jZSA8IDEwMCAmJiBkYXRlRGlmZmVyZW5jZSA+IDApIHx8IGRhdGVEaWZmZXJlbmNlIDwgMCAmJiAhdGhpcy53YXNSZWFjaGVkKSB7XHJcbiAgICAgIHRoaXMud2FzUmVhY2hlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMucmVhY2hlZC5uZXh0KG5vdyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxhc3RVbml0ID0gdGhpcy51bml0c1t0aGlzLnVuaXRzLmxlbmd0aCAtIDFdLFxyXG4gICAgICB1bml0Q29uc3RhbnRGb3JNaWxsaXNlY3MgPSB7XHJcbiAgICAgICAgeWVhcjogKCgoMTAwMCAqIDYwICogNjAgKiAyNCAqIDcpICogNCkgKiAxMiksXHJcbiAgICAgICAgbW9udGg6ICgoMTAwMCAqIDYwICogNjAgKiAyNCAqIDcpICogNCksXHJcbiAgICAgICAgd2Vla3M6ICgxMDAwICogNjAgKiA2MCAqIDI0ICogNyksXHJcbiAgICAgICAgZGF5czogKDEwMDAgKiA2MCAqIDYwICogMjQpLFxyXG4gICAgICAgIGhvdXJzOiAoMTAwMCAqIDYwICogNjApLFxyXG4gICAgICAgIG1pbnV0ZXM6ICgxMDAwICogNjApLFxyXG4gICAgICAgIHNlY29uZHM6IDEwMDBcclxuICAgICAgfSxcclxuICAgICAgdW5pdHNMZWZ0ID0ge30sXHJcbiAgICAgIHJldHVyblRleHQgPSAnJyxcclxuICAgICAgcmV0dXJuTnVtYmVycyA9ICcnLFxyXG4gICAgICB0b3RhbE1pbGxpc2Vjc0xlZnQgPSBkYXRlRGlmZmVyZW5jZSxcclxuICAgICAgaSxcclxuICAgICAgdW5pdDogYW55O1xyXG5cclxuICAgIGZvciAoaSBpbiB0aGlzLnVuaXRzKSB7XHJcbiAgICAgIGlmICh0aGlzLnVuaXRzLmhhc093blByb3BlcnR5KGkpKSB7XHJcblxyXG4gICAgICAgIHVuaXQgPSB0aGlzLnVuaXRzW2ldLnRyaW0oKTtcclxuICAgICAgICBpZiAodW5pdENvbnN0YW50Rm9yTWlsbGlzZWNzW3VuaXQudG9Mb3dlckNhc2UoKV0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAvLyRpbnRlcnZhbC5jYW5jZWwoY291bnREb3duSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmVwZWF0IHVuaXQ6ICcgKyB1bml0KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1bml0Q29uc3RhbnRGb3JNaWxsaXNlY3MuaGFzT3duUHJvcGVydHkodW5pdC50b0xvd2VyQ2FzZSgpKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pdDogJyArIHVuaXQgKyAnIGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgZm9sbG93aW5nIHVuaXRzOiB5ZWFyLCBtb250aCwgd2Vla3MsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIGl0IHdhcyByZWFjaGVkLCBldmVyeXRoaW5nIGlzIHplcm9cclxuICAgICAgICB1bml0c0xlZnRbdW5pdF0gPSAodGhpcy53YXNSZWFjaGVkKSA/IDAgOiB0b3RhbE1pbGxpc2Vjc0xlZnQgLyB1bml0Q29uc3RhbnRGb3JNaWxsaXNlY3NbdW5pdC50b0xvd2VyQ2FzZSgpXTtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RVbml0ID09PSB1bml0KSB7XHJcbiAgICAgICAgICB1bml0c0xlZnRbdW5pdF0gPSBNYXRoLmNlaWwodW5pdHNMZWZ0W3VuaXRdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdW5pdHNMZWZ0W3VuaXRdID0gTWF0aC5mbG9vcih1bml0c0xlZnRbdW5pdF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdG90YWxNaWxsaXNlY3NMZWZ0IC09IHVuaXRzTGVmdFt1bml0XSAqIHVuaXRDb25zdGFudEZvck1pbGxpc2Vjc1t1bml0LnRvTG93ZXJDYXNlKCldO1xyXG4gICAgICAgIHVuaXRDb25zdGFudEZvck1pbGxpc2Vjc1t1bml0LnRvTG93ZXJDYXNlKCldID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIElmIGl0J3MgbGVzcyB0aGFuIDAsIHJvdW5kIHRvIDBcclxuICAgICAgICB1bml0c0xlZnRbdW5pdF0gPSAodW5pdHNMZWZ0W3VuaXRdID4gMCkgPyB1bml0c0xlZnRbdW5pdF0gOiAwO1xyXG5cclxuICAgICAgICByZXR1cm5OdW1iZXJzICs9ICcgJyArIHVuaXRzTGVmdFt1bml0XSArICcgfCAnO1xyXG4gICAgICAgIHJldHVyblRleHQgKz0gJyAnICsgdW5pdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnRleHQgPT09IG51bGwgfHwgIXRoaXMudGV4dCkge1xyXG4gICAgICB0aGlzLnRleHQgPSB7XHJcbiAgICAgICAgWWVhcjogJ1llYXInLFxyXG4gICAgICAgIE1vbnRoOiAnTW9udGgnLFxyXG4gICAgICAgIFdlZWtzOiAnV2Vla3MnLFxyXG4gICAgICAgIERheXM6ICdEYXlzJyxcclxuICAgICAgICBIb3VyczogJ0hvdXJzJyxcclxuICAgICAgICBNaW51dGVzOiAnTWludXRlcycsXHJcbiAgICAgICAgU2Vjb25kczogJ1NlY29uZHMnLFxyXG4gICAgICAgIE1pbGxpU2Vjb25kczogJ01pbGxpc2Vjb25kcydcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRpc3BsYXlTdHJpbmcgPSByZXR1cm5UZXh0XHJcbiAgICAgIC5yZXBsYWNlKCdZZWFyJywgdGhpcy50ZXh0LlllYXIgKyAnIHwgJylcclxuICAgICAgLnJlcGxhY2UoJ01vbnRoJywgdGhpcy50ZXh0Lk1vbnRoICsgJyB8ICcpXHJcbiAgICAgIC5yZXBsYWNlKCdXZWVrcycsIHRoaXMudGV4dC5XZWVrcyArICcgfCAnKVxyXG4gICAgICAucmVwbGFjZSgnRGF5cycsIHRoaXMudGV4dC5EYXlzICsgJyB8ICcpXHJcbiAgICAgIC5yZXBsYWNlKCdIb3VycycsIHRoaXMudGV4dC5Ib3VycyArICcgfCAnKVxyXG4gICAgICAucmVwbGFjZSgnTWludXRlcycsIHRoaXMudGV4dC5NaW51dGVzICsgJyB8ICcpXHJcbiAgICAgIC5yZXBsYWNlKCdTZWNvbmRzJywgdGhpcy50ZXh0LlNlY29uZHMpO1xyXG5cclxuICAgIHRoaXMuZGlzcGxheU51bWJlcnMgPSByZXR1cm5OdW1iZXJzLnNwbGl0KCd8Jyk7XHJcbiAgICB0aGlzLmRpc3BsYXkgPSB0aGlzLmRpc3BsYXlTdHJpbmcuc3BsaXQoJ3wnKTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7ICBcclxuaW1wb3J0IHsgQ291bnRkb3duQ29tcG9uZW50IH0gZnJvbSAnLi9jb3VudGRvd24vY291bnRkb3duLmNvbXBvbmVudCc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxyXG4gIGRlY2xhcmF0aW9uczogW1xyXG4gICAgQ291bnRkb3duQ29tcG9uZW50XHJcbiAgXSxcclxuICBleHBvcnRzOiBbXHJcbiAgICBDb3VudGRvd25Db21wb25lbnQsXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ291bnRkb3duTW9kdWxlIHsgfVxyXG4iXX0=